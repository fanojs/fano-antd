{"version":3,"sources":["../../../src/FanoForm/types/imgbox.jsx"],"names":["FanoFormImgBox","props","state","previewVisible","previewImage","handlePreview","bind","handleCancel","handleRemove","handleChange","setState","file","url","thumbUrl","console","log","fileList","onChange","field","injectProps","allowPreview","allowRemove","allowUpload","uploadButton","showUploadList","showPreviewIcon","showRemoveIcon","lineHeight","padding","value","length","label","width","React","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Upload, Icon, Modal } from 'antd'\nimport { getProps } from '../../utils/form'\n\nexport default class FanoFormImgBox extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      previewVisible: false,\n      previewImage: null\n    }\n    this.handlePreview = this.handlePreview.bind(this)\n    this.handleCancel = this.handleCancel.bind(this)\n    this.handleRemove = this.handleRemove.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleCancel () {\n    this.setState({ previewVisible: false })\n  }\n\n  handlePreview (file) {\n    this.setState({\n      previewImage: file.url || file.thumbUrl,\n      previewVisible: true\n    })\n  }\n\n  handleRemove (file) {\n    console.log(file)\n  }\n\n  handleChange ({ file, fileList }) {\n    console.log(file, fileList)\n    this.props.onChange(fileList)\n  }\n\n  render () {\n    const { field } = this.props.injectProps\n    const props = getProps(this.props, [\n      'disabled',\n      'name',\n      'action',\n      'multiple',\n      'withCredentials',\n      'headers',\n      'accept',\n      'data',\n      'customRequest'\n    ])\n    const { allowPreview, allowRemove, allowUpload } = field.props\n\n    const { previewVisible, previewImage } = this.state\n    let uploadButton = (\n      <div>\n        <Icon type={'plus'} />\n        <div className={'ant-upload-text'}>Upload</div>\n      </div>\n    )\n    props.showUploadList = {}\n    if (allowPreview === false) {\n      props.showUploadList.showPreviewIcon = false\n    }\n    if (allowRemove === false) {\n      props.showUploadList.showRemoveIcon = false\n    }\n    if (allowUpload === false) {\n      uploadButton = null\n    }\n    return (\n      <div style={{ lineHeight: '100%', padding: '4px 0' }}>\n        <Upload\n          {...props}\n          listType={'picture-card'}\n          fileList={this.props.value || []}\n          onPreview={this.handlePreview}\n          onRemove={this.handleRemove}\n          onChange={this.handleChange}\n        >\n          {this.props.value.length >= 3 ? null : uploadButton}\n        </Upload>\n        <Modal\n          visible={previewVisible}\n          footer={null}\n          onCancel={this.handleCancel}\n        >\n          <img\n            alt={field.label}\n            style={{ width: '100%' }}\n            src={previewImage}\n          />\n        </Modal>\n      </div>\n    )\n  }\n}\n"],"file":"imgbox.js"}